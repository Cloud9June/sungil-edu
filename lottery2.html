<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ï∂îÏñµÏùò ÎΩëÍ∏∞</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Single+Day&display=swap');
    body {
      font-family: 'Arial', sans-serif;
      background: #fffde7;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    #container {
        width: 700px;
        height: 1000px;
        border: 1px solid yellowgreen;
        margin: 0 auto;
        padding-bottom: 50px;
        border-radius: 10px;
        background-color: pink;
        background-image: url(images/backImg.png);
        background-size: cover;
        background-repeat: no-repeat;
    }
    h1 { 
      color: #d32f2f; 
      font-family: Single Day;
    }
    #grid {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 6px;
      max-width: 580px;
      margin: 330px auto 0 auto;
      background-color: #fff;
      padding: 5px 10px;
      border-radius: 10px;
    }
    .box {
      width: 100%;
      padding-top: 100%;
      position: relative;
      perspective: 1000px;
      cursor: pointer;
      overflow: hidden;
    }
    .flip-inner {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      transition: transform 0.6s ease-in-out;
      transform-style: preserve-3d;
    }
    .flip-front, .flip-back {
      position: absolute;
      width: 100%;
      height: 100%;
      font-size: 18px;
      backface-visibility: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 6px;
      font-weight: bold;
      color: white;
    }
    .flip-front {
      background: #1976d2;
    }
    .flip-back {
      transform: rotateY(180deg);
    }
    .flip-back.winner {
      background: #4caf50;
    }
    .flip-back.loser {
      background: #9e9e9e;
    }
    .flipped .flip-inner {
      transform: rotateY(180deg);
    }
    #resultPopup {
      display: none;
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1000;
      background: #ffffff;
      border: 4px solid #4caf50;
      padding: 30px;
      border-radius: 15px;
      font-size: 1.4em;
      white-space: pre-line;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }
    #closeBtn {
      margin-top: 15px;
      padding: 8px 20px;
      background-color: #4caf50;
      border: none;
      border-radius: 5px;
      color: white;
      font-size: 1em;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <button onclick="location.href='https://cloud9june.github.io/sungil-edu/kiosk.html'" 
    style="position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            font-size: 22px; padding: 14px 30px; background: #4CAF50; color: white;
            border: none; border-radius: 12px; box-shadow: 2px 2px 10px rgba(0,0,0,0.1);">
üè† ÌôàÏúºÎ°ú
  </button>
  <div id="container">
    <h1></h1>
    <div id="grid"></div>

    <div id="resultPopup">
    <div id="resultText"></div>
    <button id="closeBtn" onclick="closePopup()">ÌôïÏù∏</button>
  </div>

  <audio id="soundWin" src="sounds/orchestral-win-331233.mp3" preload="auto"></audio>
  <audio id="soundLose" src="sounds/no-luck-too-bad-disappointing-sound-effect-112943.mp3" preload="auto"></audio>
  </div>

  <script>
    const prizeDistribution = {
      'Ï¥àÏΩúÎ¶ø': 10,
      'ÏÇ¨ÌÉï': 10,
      'ÏïÑÏù¥Ïä§ÌÅ¨Î¶º': 10,
      'ÏùåÎ£åÏàò': 10,
      'ÍΩù': 32
    };

    let isLocked = false;

    const totalBoxes = Object.values(prizeDistribution).reduce((a, b) => a + b, 0);
    const prizePool = [];

    for (const [item, count] of Object.entries(prizeDistribution)) {
      for (let i = 0; i < count; i++) {
        prizePool.push(item);
      }
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }
    shuffle(prizePool);

    const grid = document.getElementById('grid');
    const soundWin = document.getElementById('soundWin');
    const soundLose = document.getElementById('soundLose');
    const popup = document.getElementById('resultPopup');
    const resultText = document.getElementById('resultText');

    const winMessages = [
      "Ï∂ïÌïòÌï©ÎãàÎã§! üéâ\n'{prize}' ÎãπÏ≤®!\nÏ¢ãÏùÄ ÌïòÎ£® ÎêòÏÑ∏Ïöî!",
      "'{prize}' Î∞õÏúºÏÖ®ÏäµÎãàÎã§!\nÏö¥Ïù¥ Ï¢ãÏùÄ ÌïòÎ£®ÎÑ§Ïöî!",
      "ÌñâÏö¥Ïùò '{prize}'!\nÍ∏∞Î∂Ñ Ï¢ãÏùÄ ÌïòÎ£® ÎêòÏãúÍ∏∏!",
      "'{prize}' ÎãπÏ≤®!!\nÏõÉÏùå Í∞ÄÎìùÌïú ÌïòÎ£® Î≥¥ÎÇ¥ÏÑ∏Ïöî!"
    ];

    const loseMessages = [
      "üò≠ ÍΩù!!\nÏïÑÏâΩÎÑ§Ïöî „Ö†„Ö†",
      "Îã§Ïùå Í∏∞ÌöåÏóê ÎèÑÏ†ÑÌïòÏÑ∏Ïöî!\nÌûòÎÇ¥ÏÑ∏Ïöî!",
      "ÍΩùÏûÖÎãàÎã§ üò¢\nÍ∑∏ÎûòÎèÑ Ïò§ÎäòÏùÄ Ï¢ãÏùÄ ÎÇ†!",
      "Ïö¥ÎèÑ Ïã§Î†•Ïù¥Ï£†!\nÏù¥Î≤àÏóî ÍΩù~"
    ];

    prizePool.forEach(prize => {
      const box = document.createElement('div');
      box.className = 'box';
      box.innerHTML = `
        <div class="flip-inner">
          <div class="flip-front">üéÅ</div>
          <div class="flip-back ${prize === 'ÍΩù' ? 'loser' : 'winner'}">${prize}</div>
        </div>`;
      box.dataset.prize = prize;

      box.addEventListener('click', function () {
        if (box.classList.contains('flipped') || isLocked) return;
        isLocked = true;

        const sound = prize === 'ÍΩù' ? soundLose : soundWin;
        sound.currentTime = 0;
        sound.play();

        box.classList.add('flipped');

        setTimeout(()=>{
            const messageSet = prize === 'ÍΩù' ? loseMessages : winMessages;
            const msgTemplate = messageSet[Math.floor(Math.random() * messageSet.length)];
            const msg = msgTemplate.replace('{prize}', prize);

            resultText.innerText = msg;
            popup.style.display = 'block';
        }, 700);
    });

      grid.appendChild(box);
    });

    function closePopup() {
      popup.style.display = 'none';
      isLocked = false;
    }
  </script>
</body>
</html>